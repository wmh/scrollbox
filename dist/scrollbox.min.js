!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";class t{constructor(t,e={}){this.element=t,this.config={linear:!1,startDelay:2,delay:3,step:5,speed:32,switchItems:1,direction:"vertical",distance:"auto",autoPlay:!0,onMouseOverPause:!0,paused:!1,queue:null,listElement:"ul",listItemElement:"li",infiniteLoop:!0,switchAmount:0,afterForward:null,afterBackward:null,triggerStackable:!1,...e},this.config.scrollOffset="vertical"===this.config.direction?"scrollTop":"scrollLeft",this.config.queue&&(this.config.queue=document.getElementById(this.config.queue)),this.scrollingId=null,this.nextScrollId=null,this.paused=!1,this.switchCount=0,this.stackedTriggerIndex=0,this.containerUL=null,this.init()}init(){this.config.onMouseOverPause&&(this.element.addEventListener("mouseover",()=>{this.paused=!0}),this.element.addEventListener("mouseout",()=>{this.paused=!1})),this.containerUL=this.element.querySelector(`${this.config.listElement}:first-child`),this.containerUL?(!1===this.config.infiniteLoop&&0===this.config.switchAmount&&(this.config.switchAmount=this.containerUL.children.length),this.element.addEventListener("resetClock",t=>this.resetClock(t.detail?.delay)),this.element.addEventListener("forward",()=>this.onForward()),this.element.addEventListener("backward",()=>this.onBackward()),this.element.addEventListener("pauseHover",()=>this.pauseHover()),this.element.addEventListener("forwardHover",()=>this.forwardHover()),this.element.addEventListener("speedUp",t=>this.speedUp(t.detail?.speed)),this.element.addEventListener("speedDown",t=>this.speedDown(t.detail?.speed)),this.element.addEventListener("updateConfig",t=>this.updateConfig(t.detail)),this.config.autoPlay&&(this.nextScrollId=setTimeout(()=>this.forward(),1e3*this.config.startDelay))):console.error("ScrollBox: No list element found")}scrollForward(){if(this.paused)return;const t=this.containerUL.querySelector(`${this.config.listItemElement}:first-child`);if(!t)return;const e="auto"!==this.config.distance?this.config.distance:"vertical"===this.config.direction?t.offsetHeight+this.getMargin(t):t.offsetWidth+this.getMargin(t);let i;if(this.config.linear)i=Math.min(this.element[this.config.scrollOffset]+this.config.step,e);else{const t=Math.max(3,parseInt(.3*(e-this.element[this.config.scrollOffset]),10));i=Math.min(this.element[this.config.scrollOffset]+t,e)}if(this.element[this.config.scrollOffset]=i,i>=e){this.element[this.config.scrollOffset]=0;for(let t=0;t<this.config.switchItems;t++){if(this.config.queue&&this.config.queue.querySelector(this.config.listItemElement))this.containerUL.appendChild(this.config.queue.querySelector(this.config.listItemElement)),this.containerUL.querySelector(`${this.config.listItemElement}:first-child`)?.remove();else{const t=this.containerUL.querySelector(`${this.config.listItemElement}:first-child`);t&&this.containerUL.appendChild(t)}this.switchCount++}if(clearInterval(this.scrollingId),this.scrollingId=null,"function"==typeof this.config.afterForward&&this.config.afterForward.call(this.element,{switchCount:this.switchCount,currentFirstChild:this.containerUL.querySelector(`${this.config.listItemElement}:first-child`)}),this.config.triggerStackable&&0!==this.stackedTriggerIndex)return void this.releaseStack();if(!1===this.config.infiniteLoop&&this.switchCount>=this.config.switchAmount)return;this.config.autoPlay&&(this.nextScrollId=setTimeout(()=>this.forward(),1e3*this.config.delay))}}scrollBackward(){if(this.paused)return;if(0===this.element[this.config.scrollOffset]){const t=this.containerUL.querySelector(`${this.config.listItemElement}:last-child`);if(!t)return;const e="auto"!==this.config.distance?this.config.distance:"vertical"===this.config.direction?t.offsetHeight:t.offsetWidth;this.element[this.config.scrollOffset]=e;for(let t=0;t<this.config.switchItems;t++){const t=this.containerUL.querySelector(`${this.config.listItemElement}:last-child`),e=this.containerUL.querySelector(`${this.config.listItemElement}:first-child`);t&&e&&this.containerUL.insertBefore(t,e)}return}let t;if(this.config.linear)t=Math.max(this.element[this.config.scrollOffset]-this.config.step,0);else{const e=Math.max(3,parseInt(.3*this.element[this.config.scrollOffset],10));t=Math.max(this.element[this.config.scrollOffset]-e,0)}if(this.element[this.config.scrollOffset]=t,0===t){if(this.switchCount--,clearInterval(this.scrollingId),this.scrollingId=null,"function"==typeof this.config.afterBackward&&this.config.afterBackward.call(this.element,{switchCount:this.switchCount,currentFirstChild:this.containerUL.querySelector(`${this.config.listItemElement}:first-child`)}),this.config.triggerStackable&&0!==this.stackedTriggerIndex)return void this.releaseStack();this.config.autoPlay&&(this.nextScrollId=setTimeout(()=>this.forward(),1e3*this.config.delay))}}getMargin(t){const e=window.getComputedStyle(t),i=parseInt(e.marginTop)||0,s=parseInt(e.marginBottom)||0,n=parseInt(e.marginLeft)||0,o=parseInt(e.marginRight)||0;return"vertical"===this.config.direction?i+s:n+o}forward(){clearInterval(this.scrollingId),this.scrollingId=setInterval(()=>this.scrollForward(),this.config.speed)}backward(){clearInterval(this.scrollingId),this.scrollingId=setInterval(()=>this.scrollBackward(),this.config.speed)}forwardHover(){this.config.autoPlay=!0,this.paused=!1,clearInterval(this.scrollingId),this.scrollingId=setInterval(()=>this.scrollForward(),this.config.speed)}pauseHover(){this.paused=!0}resetClock(t){void 0!==t&&(this.config.delay=t),clearTimeout(this.nextScrollId),this.config.autoPlay&&(this.nextScrollId=setTimeout(()=>this.forward(),1e3*this.config.delay))}releaseStack(){0!==this.stackedTriggerIndex&&(this.stackedTriggerIndex>0?(this.stackedTriggerIndex--,this.nextScrollId=setTimeout(()=>this.forward(),0)):(this.stackedTriggerIndex++,this.nextScrollId=setTimeout(()=>this.backward(),0)))}onForward(){this.config.triggerStackable?null!==this.scrollingId?this.stackedTriggerIndex++:this.forward():(clearTimeout(this.nextScrollId),this.forward())}onBackward(){this.config.triggerStackable?null!==this.scrollingId?this.stackedTriggerIndex--:this.backward():(clearTimeout(this.nextScrollId),this.backward())}speedUp(t){void 0===t&&(t=Math.max(1,parseInt(this.config.speed/2,10))),this.config.speed=t}speedDown(t){void 0===t&&(t=2*this.config.speed),this.config.speed=t}updateConfig(t){this.config={...this.config,...t}}destroy(){clearInterval(this.scrollingId),clearTimeout(this.nextScrollId),this.element.removeEventListener("mouseover",()=>{}),this.element.removeEventListener("mouseout",()=>{})}}"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define([],()=>t):window.ScrollBox=t,("undefined"!=typeof jQuery||"undefined"!=typeof $)&&((jQuery||$).fn.scrollbox=function(e){return this.each(function(){this._scrollbox||(this._scrollbox=new t(this,e))})})});